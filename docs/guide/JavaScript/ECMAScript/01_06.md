# 运算符

## 1. 算数运算符

### 简介

1. `JavaScript` 共提供 10 个算术运算符，用来完成基本的算术运算。

- 加法运算符: `x + y`
- 减法运算符: `x - y`
- 乘法运算符: `x * y`
- 除法运算符: `x / y`
- 指数运算符: `x ** y`
- 余数运算符: `x % y`
- 自增运算符: `++x` 或者 `x++`
- 自减运算符: `--x` 或者 `x--`
- 数值运算符: `+x`
- 负数值运算符: `-x`

### 加法运算符

1. 加法运算符`+`是最常见的运算符，用来求两个数值的和
2. `JavaScript` 允许非数值的相加，会对我们的参与运算的数值进行隐式转换。

- 如果相加的其中一方或者两方是布尔值，布尔值会被`Number()`方法`隐式转换`(系统自动调用方法转换我们的值)为数值类型，再进行相加的运算。

```js
true + true // 2
1 + true // 2
```

- 在字符串的相加中，这时加法运算符会变成连接运算符，如果其中的一方是字符串那么另一方会被`toString()`方法`隐式转换`为字符串并且两方会被拼接起来，返回一个新的字符串，如果两方都是字符串那么两个字符串会直接拼接在一起并且返回。

```js
;`true` + 1 // 'true1'
1 + '2' // '12'
3 + 4 + '5' // "75"
```

- 如果相加的一方是对象，必须先转成原始类型的值。对象会先调用对象的`valueOf()`方法(返回自己本身)，看看返回的是原始值还是对象(或者说复杂数据类型)，如果是原始值就会直接返回，如果是个对象就会调用对象的`toString()`方法把它转换为原始类型的值，然后再相加。

```js
const obj = { a: 1 }

obj + 1 // '[object Object] 1'
// 相当于 '[object Object]' + 1 进行字符串拼接 其步骤如下

obj.valueOf() // {a: 1}
// 调用valueOf()方法还是返回了一个对象

obj.toString() // '[object Object]'
// 由于valueOf()返回了一个对象，接着就会调用toString()方法，返回了原始值 '[object Object]'

// 如果重写了对象的valueOf()方法
obj.valueOf = function () {
  return 1
}

// 由于valueOf()返回了一个原始值，就会直接用这个值计算
obj + true // 2

// 或者我们重写toString()，也能改变运算的结果，此前先忽略上方的valueOf()重写
obj.toString = function () {
  return 'hello'
}

// 由于valueOf()返回了一个对象，就会继续调用toString()方法，方法返回了字符串'hello',相当于 'hello' + true
obj + true // 'hellotrue'
```

### 减法、除法和乘法

1. 符号为减法(`-`)、除法(`/`)和乘法(`*`)。
1. 它们的规则是: 所有运算元一律被`Number()`方法`隐式转换`为数值，再进行相应的数学运算。

```js
1 - true // 0
1 * '2' // 2
1 / '2' // 0.5
```

### 余数运算符

1. 余数运算符(%)返回前一个运算元与后一个运算元除后的余数。

### 自增和自减运算符

1. 在原本数值上加一或减一，它们会修改原始变量。符号在前就是先做运算再返回值，符号在后就是先返回值再运算。

```js
var x = 1
++x // 2
x // 2

x-- // 2
x // 1
```

### 一元运算符 +

1. 数值运算符`+`同样使用加号，但它是一元运算符,数值运算符的作用在于可以将任何值转为数值,<b>与`Number`函数的作用相同</b>。负数值运算符`-`，也同样具有将一个值转为数值的功能，只不过得到的值正负相反。

```js
;+true - // 1
  true + // -1
  [] + // 0
  {} // NaN
```

### 指数运算符

1. 指数运算符`**`完成指数运算，运算符的前一个数是底数，后一个数是指数。指数运算符是右结合，而不是左结合。

```js
// 相当于 2 ** (3 ** 2)
2 ** (3 ** 2) // 512
```

### 赋值运算符

1. 赋值运算符用于给变量赋值，赋值运算符还可以与其他运算符结合。

```js
x += y // 等同于 x = x + y
x -= y // 等同于 x = x - y
x *= y // 等同于 x = x * y
x /= y // 等同于 x = x / y
x %= y // 等同于 x = x % y
x **= y // 等同于 x = x ** y

x >>= y // 等同于 x = x >> y
x <<= y // 等同于 x = x << y
x >>>= y // 等同于 x = x >>> y
x &= y // 等同于 x = x & y
x |= y // 等同于 x = x | y
x ^= y // 等同于 x = x ^ y
```
